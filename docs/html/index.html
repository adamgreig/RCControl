<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>RCControl: RCControl Documentation</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>RCControl Documentation</h1>
<p>
<h3 align="center">20090331 </h3>At the time of writing, the code consists of five classes.<h2><a class="anchor" name="serial">
Serial Interface</a></h2>
The <a class="el" href="classSerialPort.html" title="Interfaces to a serial port.">SerialPort</a> class connects to a serial port given in the constructor and allows reading or writing to it. This is used by the Pololu controller and the GPS receiver.<h2><a class="anchor" name="pololu">
Pololu Controller</a></h2>
Pololu Servo Controller: <a href="http://www.pololu.com/catalog/product/390">http://www.pololu.com/catalog/product/390</a><p>
This device simulates a serial port to the computer over USB, and has a straightforward protocol defined in <a href="http://www.pololu.com/file/0J35/usc01a_guide.pdf">http://www.pololu.com/file/0J35/usc01a_guide.pdf</a><p>
It controls up to 16 servos connected directly to it, and requires an external power supply.<p>
<a class="el" href="classPololuServoController.html" title="Provides an interface to the Pololu servo controller.">PololuServoController</a> defines the Pololu API. Each method takes a servo number and the data to send. The class also instances <a class="el" href="classSerialPort.html" title="Interfaces to a serial port.">SerialPort</a> for actually sending data.<h2><a class="anchor" name="mftech">
MFTech Receiver</a></h2>
The third class, <a class="el" href="classMFTechReceiver.html" title="Connect to an MFTech R/C receiver, represented on the system as a joystick, and read...">MFTechReceiver</a>, is related to the MFTech R/C Receiver: <a href="http://www.mftech.de/usb-interface_en.htm#RC_USB-Interface_III">http://www.mftech.de/usb-interface_en.htm#RC_USB-Interface_III</a><p>
This device reads in data from a remote control transmitter (controller). It either connects to the transmitter by a buddy cable directly, or by connecting to an R/C receiver via the servo cables. The latter method is to be used on the car as this allows the transmitter to transmit normally over radio, then the receiver picks the signals up and sends the data on to the MFTech interface which the computer reads. It simulates a joystick to the computer, using the normal USB HID protocol. This is read as a joystick using some special Windows commands, or as a normal file handler on Linux which generates events whenever the joystick does anything. In both cases the class interface is the same.<h2><a class="anchor" name="gps">
GPSReceiver</a></h2>
The <a class="el" href="classGPSReceiver.html" title="Read GPS sentences from a serial port, then parse the GPRMC sentences.">GPSReceiver</a> class reads in lines from the GPS over the serial port, then parses them as NMEA strings to find GPRMC sentences which it extracts position and time data from, making them available as class members.<h2><a class="anchor" name="logger">
Logger</a></h2>
The final class, <a class="el" href="classFileLogger.html" title="Log a given string to the filename given at construction.">FileLogger</a>, logs this data to a file. This is to be used with other sensors for recording how a human driver controlled the car, with the aim of having the onboard computer eventually do the driving itself. Other data would also need to be logged but the same class should be useful, perhaps with some extension. Image data would be more complicated, while GPS/acceleration data should be straightforward to log.<h2><a class="anchor" name="todo">
To-Do</a></h2>
The main thing that needs to be improved at the moment is the GPS receiver class, which currently hangs waiting for a full line at the serial port. This significantly slows down program execution. A non-blocking read on the serial port, or using Window's OVERLAPPING read functions to generate events may help resolve this issue.<p>
Side note: Window's OVERLAPPING file reading is horrible! You may be better off just using a thread to constantly read the GPS port synchronously and have the main thread check that.<p>
Adam Greig<p>
April 2009 </div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Apr 8 14:21:50 2009 for RCControl by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
